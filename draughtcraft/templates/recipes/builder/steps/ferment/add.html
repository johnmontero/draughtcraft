<%!
  hidden_fields = {
    'use'     : 'PRIMARY',
    'type'    : 'RecipeAddition',
    'amount'  : 1
  }
%>

<h3>Add Yeast</h3>

<fieldset>
  ${h.form('async', hidden_fields = hidden_fields)}
    ${h.select(
      'ingredient', 
      None, 
      (
        [('', 'Add Yeast...')] + 
        [
          (yeast.id, yeast.printed_name) for yeast in h.model.Yeast.excluding(
            *[a.ingredient for a in h.request.context['recipe'].fermentation.get(h.model.Yeast, [])]
          )
        ]
      )
    )}
  ${h.end_form()}
</fieldset>
