<div class="step active clearfix"> 

  <%include file="../../tabs.html" args="active='ferment'" />
  
  <div class="ingredient-list">

    <h3 class="ribbon">Ingredients</h3>

    % if recipe.fermentation:
      <table>

        <!-- Yeast Additions -->
        % if recipe.fermentation.get(h.model.Yeast):
          <tr>
            <th class="type" />
            <th class="use">Add to</th>
            <th />
            <th>Strain</th>
            <th>Form</th>
            <th />
            <th />
          </tr>

          % for addition in recipe.fermentation.get(h.model.Yeast):
            <%include file="../additions/yeast.html" args="i=recipe.additions.index(addition), addition=addition" />
          % endfor
        %endif

        <!-- Hop Additions -->
        % if recipe.fermentation.get(h.model.Hop):
          <tr>
            <th class="type" />
            <th class="use">Use</th>
            <th class="amount">Amount</th>
            <th>Variety</th>
            <th>Form</th>
            <th class="unit">AA</th>
            <th />
          </tr>

          % for addition in recipe.fermentation.get(h.model.Hop):
            <%include file="../additions/hop.html" args="i=recipe.additions.index(addition), addition=addition" />
          % endfor
        %endif

        <!-- Extra Additions -->
        % if recipe.fermentation.get(h.model.Extra):
          <tr>
            <th class="type" />
            <th class="use">Use</th>
            <th class="amount">Amount</th>
            <th>Name</th>
            <th></th>
            <th class="unit"></th>
            <th />
          </tr>

          % for addition in recipe.fermentation.get(h.model.Extra):
            <%include file="../additions/extra.html" args="i=recipe.additions.index(addition), addition=addition" />
          % endfor
        %endif

      </table>
    % else:
      <table>
        <tr>
          <td>
            Choose yeast(s) for fermentation.
          </td>
        </tr>
      </table>
    % endif

    <h3 class="ribbon">Fermentation Schedule</h3>

    <fieldset>
      <ol class='process'>

        % for s in recipe.fermentation_steps:
          <li>
            <span>${s.step.title()} for </span>
            ${h.select(
              'days',
              [s.days],
              range(91),
              class_ = 'unit'
            )}
            day(s) at 
            ${h.select(
              'temperature',
              [int(s.fahrenheit)],
              range(101),
              class_ = 'unit'
            )} &#186;F
          </li>
        % endfor

        % if recipe.next_fermentation_step:
          <li><a href="#">Add ${recipe.next_fermentation_step.title()}...</a>
        % endif

      </ol>

    </fieldset>
  </div>

  <div class="inventory">
    <%include file="add.html" />
  </div>

</div>
