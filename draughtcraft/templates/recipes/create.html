<%inherit file="../layout.html" />

<%def name="title()">Create a New Recipe</%def>

<%def name="style()">
    <link rel="stylesheet/less" type="text/css" media="screen" href="/css/thin.less" />
    <link rel="stylesheet/less" type="text/css" media="screen" href="/css/recipes/create.less" />
</%def>

<%def name="javascript()">
    <script type="text/javascript" src="/javascript/recipes/create.js"></script>
</%def>

<h1>
  Create a New Recipe
</h1>

<div class="clearfix">

  ${h.form('')}
    <fieldset>
      <dl class="clearfix">
        <dt><label for="name">Recipe Name</label></dt>
        <dd>
          ${h.text(
            'name', 
            'e.g., Rocky Mountain River IPA', 
            tabindex = '1', 
            size = '256',
            class_ = 'default'
          )}
          <small>You can change your recipe's name later.</small>
        </dd>
        <dt>
          <label for="type">Recipe Type</label>
          <a href="#" class="question">Which should I choose?</a>
        </dt>
        <dd>
            ${h.select('type', 
            h.request.context['user'].settings['default_recipe_type'] if h.request.context['user'] else None, [
                ('MASH', 'All Grain'),
                ('EXTRACT', 'Extract'),
                ('EXTRACTSTEEP', 'Extract with Steeped Grains'),
                ('MINIMASH', 'Extract with Mini-Mash')
            ], tabindex='2')}
        </dd>
        <dt><label for="gallons">Final Volume</label></dt>
        <dd>
          ${h.select(
            'volume', 
            h.request.context['user'].settings['default_recipe_volume'] if h.request.context['user'] else 5,
            [(v, '%s Gallon(s)' % v) for v in [1, 2, 2.5, 3, 4, 5, 8, 10, 15, 20, 25]],
            tabindex='3'
          )}
          ${h.hidden(
            'unit',
            'GALLON'
          )}
        </dd>
      </dl>
    </fieldset>

    <div class="buttons">
      <button class="ribbon" tabindex="4">
        Create Recipe 
      </button>
      or <a href="javascript:history.go(-1);" tabindex="5">Go Back</a>
    </div>

  ${h.end_form()}

  % if h.request.context['user'] is None:
    <div class="info">
      <h4>Become a Member</h4>
      <p>
        DraughtCraft members can save, share, and organize their recipes online.
        Best all of, signing up is easy and free!
      </p>
      <p>
        <a href="/signup" tabindex="6">Sign Up Now</a>
      </p>
    </div>
  % endif

</div>
