<%page args="recipe" />

<dt class="recipe clearfix">
  <%
    srm = int(round(recipe.calculations.srm))
  %>
  <span class="srm srm-${min(srm, 30)}" title="${srm} SRM">
    <img src="/images/glass-plain.png" width="38" class="glass" />
  </span>

  <div class="heading">
    <h3>
      % if recipe.state == "PUBLISHED" and h.request.context['user'] == recipe.author:
        ${h.form("%sdraft" % recipe.url())}
          <a href="#" class="submit">
            ${recipe.name}
          </a>
        ${h.end_form()}
      % else:
        <a href="${recipe.url(h.request.context['user'] != recipe.author)}">
          ${recipe.name}
        </a>
      % endif    
    </h3>

    <ul class="badge">
      ${h.form("%scopy" % recipe.url())}
        <li class="copy btn submit" title="Copy"></li>
      ${h.end_form()}
      % if h.request.context['user'] == recipe.author:
        ${h.form("%sdelete" % recipe.url())}
          <li class="delete btn submit confirm" title="Delete"></li>
        ${h.end_form()}
      % endif
      <li class="views">
        ${len(recipe.views)} Views
      </li> 
    </ul>
  </div>

  <h4 class="dates">
    Created on ${h.format_date(recipe.creation_date)}, 
    updated ${h.format_age(recipe.last_updated)}
  </h4>
  <h4>
    <b>${recipe.printable_type}</b>,
    ${recipe.style.name if recipe.style else 'No Target Style Chosen'},
    ${h.plural(int(recipe.gallons), 'Gallon', 'Gallons', True)} 
  </h4>
</dt>
